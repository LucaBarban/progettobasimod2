{% extends "layout.html" %}
{% block pagestyles %}
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/library.css') }}">
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/components/books.css') }}">
{% endblock pagestyles %}
{% block content %}
    {% from 'components/book.html' import display_book %}
    <div class="lib__container">
        <div class="lib__item">
            <h1 class="lib__title">{{ user.username }}'s library</h1>
            <div class="lib__library">
                {% for own in owns %}
                    <div class="own__item">
                        {{ display_book(own.book, publisher=False, generes=False) }}
                        <div class="own__details">
                            <div class="detail__box">
                                <span>{{ own.state }}</span>
                                <br />
                                <span>x{{ own.quantity }}</span>
                            </div>
                        </div>
                        {% if own.price %}
                            <a class="lib__btn"
                               href="/insertion/update/?book={{ own.fk_book }}&bookstate={{ own.state }}&quantity={{ own.quantity }}&oldprice={{ own.price }}"> edit </a>
                            <a class="lib__btn"
                               href="/insertion/unlist/?book={{ own.fk_book }}&bookstate={{ own.state }}&quantity={{ own.quantity }}&price={{ own.price }}">remove</a>
                        {% elif own.user.seller %}
                            <a class="lib__btn"
                               href="/insertion/list/?book={{ own.fk_book }}&bookstate={{ own.state }}">create</a>
                        {% endif %}
                    </div>
                {% endfor %}
                {% if page == last_page %}
                    <div class="lib__add">
                        <a href="/book/add" class="add__btn">+</a>
                    </div>
                {% endif %}
            </div>
            {% include "components/pagination.html" %}
        </div>
    </div>
{% endblock content %}
